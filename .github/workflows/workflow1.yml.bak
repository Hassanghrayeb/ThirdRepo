name: pipeline1
env:
    USERNAME: hghrayeb96
    PASSWORD: 71260870Hh
on:
    push:
        branches: main
        
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - 
                name: checkout the code
                uses: actions/checkout@v4
            -
                name: setup node env
                uses: actions/setup-node@v6
                with:
                    node-version: '18'
            -
                name: install dependencies
                script: npm install 
            -
                name: build project
                script: npm test && npm build -- --output-path=dist 
            -
                name: login to dockerhub
                uses: docker/login-action@v3
                with:
                    username: ${{ env.USERNAME }}
                    password: ${{ env.PASSWORD }}       
            -
                name: Set up QEMU
                uses: docker/setup-qemu-action@v3
            -
                name: Set up Docker Buildx
                uses: docker/setup-buildx-action@v3
            -
                name: Build and push
                uses: docker/build-push-action@v6                
              